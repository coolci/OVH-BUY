version: '3.8'

services:
  ovh-sniper:
    build: .
    container_name: ovh-phantom-sniper
    ports:
      - "5000:5000"    # 后端 API
      - "8080:8080"    # 前端界面
    environment:
      # 从根目录 .env 文件读取，或使用默认值
      - API_SECRET_KEY=${API_SECRET_KEY:-ovh-phantom-sniper-2024-secret-key}
      - PORT=${PORT:-5000}
      - DEBUG=${DEBUG:-false}
      - ENABLE_API_KEY_AUTH=${ENABLE_API_KEY_AUTH:-true}
    volumes:
      # 挂载配置文件（可在容器外直接修改）
      - ./backend/.env:/app/backend/.env
      # 持久化数据
      - ./backend/data:/app/backend/data
      # 持久化日志
      - ./backend/logs:/app/backend/logs
      # 持久化缓存
      - ./backend/cache:/app/backend/cache
    restart: unless-stopped
    networks:
      - ovh-network

networks:
  ovh-network:
    driver: bridge
